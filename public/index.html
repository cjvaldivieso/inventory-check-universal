<!DOCTYPE html>
<html>
<head>
<title>Shappi Inventory App</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script src="/socket.io/socket.io.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.js"></script>

<style>
body { background:#0B0C2A;color:white;text-align:center;font-family:Arial }

button {
  background:#6c47ff;
  color:white;
  padding:10px;
  border:none;
  border-radius:10px;
  margin:6px;
  font-size:16px;
}
table { width:95%;margin:auto }
td,th { border:1px solid #555;padding:6px }
</style>
</head>

<body>

<h2>ðŸ“¦ Shappi Inventory App</h2>

<label for="csvUpload" class="btn">Upload CSV</label>
<input id="csvUpload" type="file" accept=".csv" hidden>

<div id="csvInfo">No CSV</div>

<button id="scanBinBtn">Scan Bin</button>
<button id="scanItemBtn">Scan Item</button>
<button onclick="window.location='/export-full-audit'">Export Full Audit</button>

<div>Current Bin: <span id="currentBin">None</span></div>

<table>
<thead><tr><th>Item</th><th>Bin</th><th>Status</th></tr></thead>
<tbody id="logTbody"></tbody>
</table>

<div id="toast" style="display:none;background:#222;padding:10px;margin-top:10px"></div>

<script src="app.js"></script>

<script>
document.getElementById("csvUpload").addEventListener("change", async e=>{
  const fd = new FormData();
  fd.append("csv", e.target.files[0]);

  const res = await fetch("/upload-csv", { method:"POST", body: fd});
  const d = await res.json();

  document.getElementById("csvInfo").innerText =
    `Loaded ${d.total} items Â· ${d.uploadedAt}`;
});
</script>

</body>
</html>

